<div class="container">
  <h1 class="mb-2">Tell us what you think!</h1>
  <div class="col-md-9">
    <form [formGroup]="form" name="blogForm" (submit)="onBlogSubmit()" *ngIf="newPost">
      <div class="form-group">
        <label for="title">Title</label>
        <div [ngClass]="{'has-success': form.controls.title.valid, 'has-error': form.controls.title.dirty && form.controls.title.errors}">
          <input type="text" name="title" class="form-control" placeholder="*Comment Title" autocomplete="off" formControlName="title"
          />
          <ul class="help-block">
            <li *ngIf="form.controls.title.dirty && form.controls.title.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.title.dirty && form.controls.title.errors?.minlength) || (form.controls.title.dirty && form.controls.title.errors?.maxlength)">Max
              length: 80, Min length: 5</li>
          </ul>
        </div>
      </div>
      <div class="form-group">
        <label for="body">Body</label>
        <div [ngClass]="{'has-success': form.controls.body.valid, 'has-error': form.controls.body.dirty && form.controls.body.errors}">
          <textarea name="body" rows="8" cols="80" placeholder="*Body" class="form-control" formControlName="body"></textarea>
          <ul class="help-block">
            <li *ngIf="form.controls.body.dirty && form.controls.body.errors?.required">This field is required.</li>
            <li *ngIf="(form.controls.body.dirty && form.controls.body.errors?.minlength) || (form.controls.body.dirty && form.controls.body.errors?.maxlength)">Max
              length: 500, Min length: 5</li>
          </ul>
        </div>
      </div>
      <button [disabled]="processing" type="button" name="button" (click)="goBack()" class="btn btn-warning">Go Back</button>
      <button [disabled]="processing || !form.valid" type="submit" name="button" class="btn btn-success">Submit</button>
    </form>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="comments col-md-9" id="comments">
      <h3 class="mb-2">Comments</h3>
      <div *ngIf="!newPost">
        <div *ngFor="let blog of blogPosts">
          <hr>
          <div class="comment mb-2 row">
            <div class="comment-avatar col-md-1 col-sm-2 text-center pr-1">
              <a href=""><img class="mx-auto rounded-circle img-fluid" [src]="'https://pbs.twimg.com/media/C8QlKN7V0AA3zlG.jpg'"
                  alt="avatar"></a>
            </div>
            <div class="comment-content col-md-11 col-sm-10">
              <h6 class="small comment-meta" style="color:#9199a1"><a href="#">{{ blog.createdBy }}</a> {{ blog.createdAt
                | date:'MMM dd, yyyy' }}
              </h6>
              <h4 class="panel-title" style="color: #07C;">{{ blog.title }}</h4>
              <p style="font-size: 15px;">
                {{ blog.body }}
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="row pt-2">
        <div class="col-12">
          <button *ngIf="apiService.getLoggedIn() && !newPost" type="button" name="button" class="btn btn-warning" (click)="newBlogForm()">New
            Post
          </button>
          <button *ngIf="!apiService.getLoggedIn()" type="button" name="button" class="btn btn-warning disabled">New Post</button>
        </div>
      </div>

      <div class="row show-hide-message" *ngIf="message && newPost">
        <div [ngClass]="messageClass">
          {{ message }}
        </div>
      </div>

    </div>
  </div>
</div>